{"version":3,"file":"static/js/691.1a482488.chunk.js","mappings":"mQAGaA,GAAYC,EAAAA,EAAAA,IAAO,OAAPA,CAAH,sFAMTC,GAAUD,EAAAA,EAAAA,IAAOE,EAAAA,GAAPF,CAAH,sQ,2BCiEpB,EAhEe,WAAO,IAAD,IAEjB,GAA4BG,EAAAA,EAAAA,UAAQ,UAACC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,kBAAxC,QAAsD,MAA1F,eAAOC,EAAP,KAAeC,EAAf,KAGA,GAA0BP,EAAAA,EAAAA,UAAS,IAAnC,eAAOQ,EAAP,KAAcC,EAAd,KACA,GAAkCT,EAAAA,EAAAA,WAAS,GAA3C,eAAOU,EAAP,KAAkBC,EAAlB,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,GAAWC,EAAAA,EAAAA,MACXC,EAAM,UAAGJ,EAAaK,IAAI,gBAApB,QAAgC,GAC5CC,QAAQC,IAAI,YAAaH,IAEzBI,EAAAA,EAAAA,YAAU,WAGNlB,OAAOC,aAAakB,QAAQ,SAAUrB,KAAKsB,UAAUjB,GAExD,GAAE,CAACA,KAEJe,EAAAA,EAAAA,YAAU,WACQ,KAAVb,IAIJG,GAAa,IAEba,EAAAA,EAAAA,IAAgBhB,GACXiB,MAAK,SAACC,GACHnB,EAAUmB,GACVf,GAAa,EAChB,IACAgB,OAAM,SAAAC,GACHC,QAAQC,OAAO,IAAIC,MAAJ,UAAaH,EAAMI,UACrC,IACR,GAAE,CAACxB,IAYJ,OACI,UAACZ,EAAD,YACI,SAACqC,EAAA,EAAD,CAAcC,aAZD,SAACC,GACVA,IAAgB3B,GAIxBC,EAAS0B,GACT5B,EAAU,MACVO,EAAgC,KAAhBqB,EAAqB,CAAEC,MAAOD,GAAgB,CAAC,IAL/DE,EAAAA,GAAAA,MAAY,0BAMf,IAKQ3B,IAAa,4BACV,mDACI,SAAC,KAAD,OAEPJ,IAAU,wBACoB,IAA1BA,EAAOgC,QAAQC,OACVjC,EAAOgC,QAAQE,KAAI,YAAoB,IAAjBC,EAAgB,EAAhBA,GAAIC,EAAY,EAAZA,MACxB,OAAO,yBAAa,UAAC5C,EAAD,CAAS6C,GAAE,UAAKF,GAAMG,MAAO,CAACC,KAAM9B,GAAW+B,KAAG,EAAlD,cAAqDJ,MAAzDD,EACnB,KACC,mDAIrB,C","sources":["pages/Movies/Movies.styled.jsx","pages/Movies/Movies.jsx"],"sourcesContent":["import styled from \"styled-components\";\nimport { NavLink } from \"react-router-dom\";\n\nexport const Container = styled('main')`\ntext-align: center;\nmargin-left: auto;\nmargin-right: auto;\n`\n\nexport const NavItem = styled(NavLink)`\ndisplay: block;\nwidth: 300px;\npadding: 8px;\nborder-radius: 4px;\ntext-decoration: none;\ncolor: #000;\n\n    :hover,\n    :focus-visible {\n        background: linear-gradient(to right, #1488cc, #2b32b2);\n        color: #fff;\n    }\n`","import { useState, useEffect} from \"react\"\nimport { useLocation } from \"react-router-dom\";\n\nimport MoviesSearch from \"../../components/MoviesSearch/MoviesSearch\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { Dna } from 'react-loader-spinner';\nimport { NavItem, Container } from \"./Movies.styled\";\nimport { toast } from \"react-toastify\";\nimport { getSearchMovies } from \"utils\";\n\nconst Movies = () => {\n\n    const [movies, setMovies] = useState(JSON.parse(window.localStorage.getItem('movies')) ?? null);\n    // const [movies, setMovies] = useState(null);\n\n    const [value, setValue] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [searchParams, setSearchParams] = useSearchParams();\n    const location = useLocation();\n    const filter = searchParams.get('query') ?? '';\n    console.log('filter =>', filter);\n\n    useEffect(() => {\n        // console.log(movies)\n        // console.log('Refresh movies')\n        window.localStorage.setItem('movies', JSON.stringify(movies))\n\n    }, [movies])\n\n    useEffect(() => {\n        if (value === '') {\n            return\n        }\n\n        setIsLoading(true);\n\n        getSearchMovies(value)\n            .then((response) => {\n                setMovies(response)\n                setIsLoading(false)\n            })\n            .catch(error => {\n                Promise.reject(new Error(`${error.message}`))\n            })\n    }, [value])\n\n    const onFormSubmit = (searchValue) => {\n            if (searchValue === value) {\n        toast.error(\"Enter new search value!\");\n        return\n        }\n        setValue(searchValue)\n        setMovies(null)\n        setSearchParams(searchValue !== '' ? { query: searchValue } : {})\n    }\n\n    return (\n        <Container>\n            <MoviesSearch onFormSubmit={ onFormSubmit} />\n            {isLoading && <div>\n                <p>Loading... Please wait</p> \n                    <Dna/> \n            </div>}\n            {movies && <ul>\n                {movies.results.length !== 0\n                    ? movies.results.map(({ id, title }) => {\n                        return <li key={id}><NavItem to={`${id}`} state={{from: location}} end> {title }</NavItem></li>\n                    })\n                    : <p>Change your request</p>}\n                </ul>}\n        </Container>\n    )\n}\n\nexport default Movies;"],"names":["Container","styled","NavItem","NavLink","useState","JSON","parse","window","localStorage","getItem","movies","setMovies","value","setValue","isLoading","setIsLoading","useSearchParams","searchParams","setSearchParams","location","useLocation","filter","get","console","log","useEffect","setItem","stringify","getSearchMovies","then","response","catch","error","Promise","reject","Error","message","MoviesSearch","onFormSubmit","searchValue","query","toast","results","length","map","id","title","to","state","from","end"],"sourceRoot":""}